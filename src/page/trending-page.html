<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trending Movies</title>
    <link rel="stylesheet" href="../style/output.css" />
  </head>
  <body class="bg-stone-900 font-sans">
    <div class="container mx-auto p-4">
      <h1 class="text-2xl font-bold mb-4 text-white">Trending Movies</h1>
      <div id="movie-container" class="grid grid-cols-7 gap-4"></div>
    </div>

    <script>
      const apiKey = "38ce8edf86ce46dd2cc6a4d56763297a"; // Replace with your TMDB API key
      const movieContainer = document.getElementById("movie-container");

      fetch(
        `https://api.themoviedb.org/3/trending/movie/week?api_key=${apiKey}`
      )
        .then((response) => {
          if (!response.ok) {
            throw new Error("Failed to fetch data");
          }
          return response.json();
        })
        .then((data) => {
          // Clear the container
          movieContainer.innerHTML = "";

          // Limit to 14 movies using slice
          data.results.slice(0, 14).forEach((code) => {
            const movieCard = document.createElement("div");
            movieCard.className = " overflow-hidden";

            const posterPath = code.poster_path
              ? `https://image.tmdb.org/t/p/w500${code.poster_path}`
              : "https://via.placeholder.com/200x300?text=No+Image";

            movieCard.innerHTML = `
            <img src="${posterPath}" alt="${code.title}" class="w-full h-64 object-cover">
            <div class="p-4">
              <h2 class="text-lg text-white font-bold line-clamp-1">${code.title}</h2>
              <p class="text-sm text-gray-100">Rating: ${code.vote_average}</p>
            </div>
          `;

            movieContainer.appendChild(movieCard);
          });
        })
        .catch((error) => {
          console.error("Error:", error);
          movieContainer.innerHTML =
            "<p class='text-center text-red-500'>Failed to load movies.</p>";
        });
    </script>
  </body>
</html>
